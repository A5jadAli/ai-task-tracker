# Agent Configuration Example - Personal Account Mode
# This demonstrates Slack and GitHub monitoring using YOUR personal accounts

# Monitoring Configuration
monitoring:
  # Slack Integration - Personal Account Mode
  slack:
    enabled: true
    mode: user                        # NEW: 'user' mode for personal account
    user_token: ${SLACK_USER_TOKEN}   # Your personal Slack token
    user_id: ${SLACK_USER_ID}         # Your Slack user ID
    monitor_dms: true                 # Monitor direct messages
    channels:
      - general
      - dev-alerts
    keywords:
      - urgent
      - help
      - agent
    actions:
      - trigger: user_mention          # Triggered when YOU are mentioned
        workflow: respond_to_mention
      - trigger: dm_received            # NEW: Triggered when you receive a DM
        workflow: respond_to_dm
      - trigger: keyword
        workflow: notify_admin

  # GitHub Integration - Personal Account Mode
  github:
    enabled: true
    mode: user                                    # NEW: 'user' mode for personal account
    personal_token: ${GITHUB_PERSONAL_TOKEN}      # Your personal access token
    username: ${GITHUB_USERNAME}                  # Your GitHub username
    repos:
      - owner/repo-name
    monitor_user_notifications: true              # NEW: Monitor your notifications
    monitor_user_mentions: true                   # NEW: Monitor when you're mentioned
    poll_interval: 300  # 5 minutes
    min_approvals: 2
    require_ci_pass: true
    actions:
      - trigger: user_mentioned_in_pr             # NEW: When you're mentioned in a PR
        workflow: respond_to_pr_mention
      - trigger: user_assigned_to_pr              # NEW: When you're assigned to a PR
        workflow: handle_pr_assignment
      - trigger: user_notification                # NEW: When you get a GitHub notification
        workflow: process_notification
      - trigger: pr_ready_to_merge
        workflow: auto_merge_pr
      - trigger: pr_needs_review
        workflow: notify_slack_review

# Scheduled Tasks
scheduled_tasks:
  - name: check_pr_status
    schedule: "*/15 * * * *"  # Every 15 minutes
    workflow: check_github_prs
  
  - name: daily_standup_reminder
    schedule: "0 9 * * 1-5"  # 9 AM weekdays
    workflow: send_standup_reminder

# Workflows
workflows:
  respond_to_mention:
    steps:
      - type: ai
        action: analyze_message
        params:
          objective: "Analyze Slack message where I was mentioned and determine appropriate response"
      - type: slack
        action: send_reply
        params:
          use_ai_response: true
  
  respond_to_dm:
    steps:
      - type: ai
        action: analyze_message
        params:
          objective: "Analyze DM and determine if it needs a response"
      - type: slack
        action: send_reply
        params:
          use_ai_response: true
  
  respond_to_pr_mention:
    steps:
      - type: ai
        action: analyze_pr
        params:
          objective: "Analyze why I was mentioned in this PR"
      - type: github
        action: add_comment
        params:
          use_ai_response: true
  
  handle_pr_assignment:
    steps:
      - type: slack
        action: send_message
        params:
          channel: dev-team
          message: "I've been assigned to PR: {pr.title} - {pr.url}"
      - type: ai
        action: analyze_pr
        params:
          objective: "Review the PR I was assigned to"
  
  process_notification:
    steps:
      - type: log
        message: "Received GitHub notification: {notification.subject}"
  
  auto_merge_pr:
    steps:
      - type: github
        action: merge_pr
        params:
          merge_method: squash
      - type: slack
        action: send_message
        params:
          channel: dev-team
          message: "Auto-merged PR: {pr.title}"
  
  notify_slack_review:
    steps:
      - type: slack
        action: send_message
        params:
          channel: dev-team
          message: "PR needs review: {pr.title} - {pr.url}"
  
  check_github_prs:
    steps:
      - type: github
        action: check_all_prs
      - type: log
        message: "Checked all PRs"
  
  send_standup_reminder:
    steps:
      - type: slack
        action: send_message
        params:
          channel: general
          message: "Daily standup in 30 minutes! ðŸš€"

# AI Configuration
ai:
  provider: gemini
  model: gemini-2.0-flash-exp
  fallback_provider: openai
  rate_limit_per_minute: 15
  enable_cache: true
  cache_ttl_minutes: 60

# Logging
logging:
  level: INFO
  file: logs/agent.log
  max_size_mb: 100
  backup_count: 5
  json_format: true

# Task Queue
task_queue:
  num_workers: 3
  max_queue_size: 100

# General Settings
agent:
  human_in_the_loop: false
  max_retries: 3
  retry_delay_seconds: 5

